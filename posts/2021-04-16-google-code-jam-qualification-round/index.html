<!doctype html><html lang="en" data-mode="light"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.4" /><meta property="og:title" content="Google Code Jam 2021 - Qualification Round" /><meta name="author" content="Viktória Nemkin" /><meta property="og:locale" content="en" /><meta name="description" content="The 2021 Google Code Jam Qualification Round took place a few weeks ago. The duration of this round is 30 hours, so no matter which timezone you live in around the world, you have more than a whole day to solve the tasks. To advance to the next round, you must have collected at least 30 points, and as usual, it wasn’t necessary to solve all the tasks to do so." /><meta property="og:description" content="The 2021 Google Code Jam Qualification Round took place a few weeks ago. The duration of this round is 30 hours, so no matter which timezone you live in around the world, you have more than a whole day to solve the tasks. To advance to the next round, you must have collected at least 30 points, and as usual, it wasn’t necessary to solve all the tasks to do so." /><link rel="canonical" href="https://vprog.hu/posts/2021-04-16-google-code-jam-qualification-round/" /><meta property="og:url" content="https://vprog.hu/posts/2021-04-16-google-code-jam-qualification-round/" /><meta property="og:site_name" content="VProg" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-04-16T13:00:00+02:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Google Code Jam 2021 - Qualification Round" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Viktória Nemkin","url":"https://cs.bme.hu/~nemkin"},"dateModified":"2021-04-16T13:00:00+02:00","datePublished":"2021-04-16T13:00:00+02:00","description":"The 2021 Google Code Jam Qualification Round took place a few weeks ago. The duration of this round is 30 hours, so no matter which timezone you live in around the world, you have more than a whole day to solve the tasks. To advance to the next round, you must have collected at least 30 points, and as usual, it wasn’t necessary to solve all the tasks to do so.","headline":"Google Code Jam 2021 - Qualification Round","mainEntityOfPage":{"@type":"WebPage","@id":"https://vprog.hu/posts/2021-04-16-google-code-jam-qualification-round/"},"url":"https://vprog.hu/posts/2021-04-16-google-code-jam-qualification-round/"}</script><title>Google Code Jam 2021 - Qualification Round | VProg</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="VProg"><meta name="application-name" content="VProg"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.21.1/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" style="display:block"> <img src="/assets/img/balloons-xmas.png" width="100%" alt="avatar" onerror="this.style.display='none'"> </a><h1 class="site-title"> <a href="/">VProg</a></h1><p class="site-subtitle fst-italic mb-0">Competitive programming student club at BME. ICPC, Codeforces, LeetCode, etc.</p><div class="sidebar-social d-flex flex-wrap align-items-center w-100 gap-2"> <a href="https://vprog.hu/discord" aria-label="discord" target="_blank" rel="noopener noreferrer" > <i class="fa-brands fa-discord" style="color: #7289da;"></i> </a> <a href="https://github.com/bmevprog" aria-label="github" target="_blank" rel="noopener noreferrer" > <i class="fa-brands fa-github" style="color: #333;"></i> </a> <a href="https://www.youtube.com/@bmevprog" aria-label="youtube" target="_blank" rel="noopener noreferrer" > <i class="fa-brands fa-youtube" style="color: #ff0000;"></i> </a> <a href="https://www.facebook.com/bmevprog" aria-label="facebook" target="_blank" rel="noopener noreferrer" > <i class="fa-brands fa-facebook-square" style="color: #3b5998;"></i> </a> <a href="https://www.instagram.com/bmevprog" aria-label="instagram" target="_blank" rel="noopener noreferrer" > <i class="fa-brands fa-instagram" style="color: #e1306c;"></i> </a> <a href="https://www.twitter.com/bmevprog" aria-label="twitter" target="_blank" rel="noopener noreferrer" > <i class="fa-brands fa-twitter" style="color: #1da1f2;"></i> </a> <a href="https://www.linkedin.com/company/bmevprog" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fa-brands fa-linkedin" style="color: #0077b5;"></i> </a></div></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/join/" class="nav-link"> <i class="fa-fw fa-solid fa-user-plus"></i> <span>JOIN</span> </a><li class="nav-item"> <a href="/calendar/" class="nav-link"> <i class="fa-fw fa-regular fa-calendar-days"></i> <span>CALENDAR</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fa-solid fa-box-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fa-solid fa-bars-staggered"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fa-solid fa-tags"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/rss/" class="nav-link"> <i class="fa-fw fa-solid fa-rss"></i> <span>RSS</span> </a><li class="nav-item"> <a href="/contact/" class="nav-link"> <i class="fa-fw fa-solid fa-at"></i> <span>CONTACT</span> </a></ul></nav></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Google Code Jam 2021 - Qualification Round</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link"> <i class="fas fa-search fa-fw"></i> </button> <search class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1"><header><h1 data-toc-skip>Google Code Jam 2021 - Qualification Round</h1><div class="post-meta text-muted"> <span> Posted <time data-ts="1618570800" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Apr 16, 2021 </time> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://cs.bme.hu/~nemkin">Viktória Nemkin</a> </em> </span> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="2545 words" > <em>14 min</em> read</span></div></div></header><div class="content"><p>The 2021 Google Code Jam <a href="https://codingcompetitions.withgoogle.com/codejam/round/000000000043580a">Qualification Round</a> took place a few weeks ago. The duration of this round is 30 hours, so no matter which timezone you live in around the world, you have more than a whole day to solve the tasks. To advance to the next round, you must have collected at least 30 points, and as usual, it wasn’t necessary to solve all the tasks to do so.</p><p>The tasks this year were the following:</p><ul><li><a href="https://codingcompetitions.withgoogle.com/codejam/round/000000000043580a/00000000006d0a5c">Reversort</a> (7 pont)<li><a href="https://codingcompetitions.withgoogle.com/codejam/round/000000000043580a/00000000006d1145">Moons and Umbrellas</a> (5, 11, 1 pont)<li><a href="https://codingcompetitions.withgoogle.com/codejam/round/000000000043580a/00000000006d12d7">Reversort Engineering</a> (7, 11 pont)<li><a href="https://codingcompetitions.withgoogle.com/codejam/round/000000000043580a/00000000006d1284">Median Sort</a> (7, 11, 10 pont)<li><a href="https://codingcompetitions.withgoogle.com/codejam/round/000000000043580a/00000000006d1155">Cheating Detection</a> (11, 20 pont)</ul><p>Let’s look at how we could advance to the next round!</p><h2 id="1st-task-reversort"><span class="me-2">1st Task: Reversort</span><a href="#1st-task-reversort" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="description"><span class="me-2">Description</span><a href="#description" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Reversort is an algorithm, that can sort a list of distinct integers in ascending order, using the “Reverse” operation.</p><p>Each application of this operation reverses the order of some continuous part of the list.</p><p>The pseudocode of the algorithm is the following:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>Reversort(L):
  for i := 1 to length(L) - 1
    j := index of the minimum in L[i..]
    Reverse(L[i..j])
</pre></table></code></div></div><p>The code above iterates over the array and in every step it swaps the number in the current position with the minimum number in the remaining array, such that the numbers between them will be put in reverse order, by reversing that continuous part of the array.</p><p>We can see, that at the end of the loop, the numbers in the array will be sorted in ascending order.</p><p>This algorithm is wasteful, the question is by how much. On the input, we receive an array of numbers in random order and we have to print the sum of the length of the subarrays reversed during the algorithm’s run.</p><h3 id="solution"><span class="me-2">Solution</span><a href="#solution" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>There is only one test set. We can immediately see, that it is very small: $T=100$ cases, at most $N=100$ numbers in each. If we look at the algorithm above, it runs the loop $~N$ times, inside it finds the minimum in $~N$ steps and reverses in $~N$ steps also, which means that it requires around $2\cdot{}N^2 = 2\cdot{}10^4$ steps in total. It is important to know, that 1 second is around $10^7$ - $10^8$ instructions (a rough estimate for competitive programming), so we easily fit under 1 second. We have 10 seconds and 1 GB of memory in total for the tests, so we can easily fit into these limits if we just implement the pseudocode as is.</p><p>It is a good idea to implement this task, because:</p><ul><li>It gives 7 points, which is a lot, compared to the 30 needed.<li>We only have to translate the given pseudocode to a programming language, which is easy and fast.<li>It has a Visible Verdict, so we can be sure we received those 7 points.<li>The description of the task said, that there will be a similar task later, so we might kill two birds with one stone, if we deal with this task now.</ul><p>I choose Python, because it is compact and has a similar syntax to the pseudocode itself. I usually choose between C++ and Python during competitions, using C++ for more complex tasks, where I want to use the STL library and if the time limits are strict. In this case, Python is the better choice for me.</p><p>I submitted the following code (without the comments):</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="n">n</span> <span class="o">=</span> <span class="nf">int</span><span class="p">(</span><span class="nf">input</span><span class="p">())</span> <span class="c1"># First line of the input: number of testcases
</span><span class="k">for</span> <span class="n">n_i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
  <span class="n">cost</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="n">m</span> <span class="o">=</span> <span class="nf">int</span><span class="p">(</span><span class="nf">input</span><span class="p">())</span> <span class="c1"># First line of the testcase: length of the array
</span>  <span class="n">l</span> <span class="o">=</span> <span class="nf">list</span><span class="p">(</span><span class="nf">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nf">input</span><span class="p">().</span><span class="nf">split</span><span class="p">(</span><span class="sh">'</span><span class="s"> </span><span class="sh">'</span><span class="p">)))</span> <span class="c1"># Second line of the testcase: the array itself
</span>  <span class="c1"># Implementation of Reversort
</span>  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">m</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
    <span class="n">j</span> <span class="o">=</span> <span class="n">l</span><span class="p">.</span><span class="nf">index</span><span class="p">(</span><span class="nf">min</span><span class="p">(</span><span class="n">l</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">m</span><span class="p">]))</span> <span class="c1"># Find the minimum element in the remainder of the array.
</span>    <span class="n">cost</span> <span class="o">+=</span> <span class="n">j</span><span class="o">-</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span> <span class="c1"># Add the subarray's length to the total cost.
</span>    <span class="n">l</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nf">reversed</span><span class="p">(</span><span class="n">l</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span> <span class="c1"># Reverse the subarray.
</span>  <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Case #</span><span class="si">{</span><span class="n">n_i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s">: </span><span class="si">{</span><span class="n">cost</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span> <span class="c1"># Print the solution in the correct format.
</span></pre></table></code></div></div><p>We can see, that we barely had to change anything to implement Reversort in Python and we were done. I had some issues with indexing (lesson learned: all built-in functions in Python assume intervals are closed from the left and open from the right) and I didn’t know about <code class="language-plaintext highlighter-rouge">list.index</code> and the <code class="language-plaintext highlighter-rouge">reversed</code> functions, I had to look those up.</p><p>We received 7 points so far, we need 23 more.</p><h2 id="2nd-task-moons-and-umbrellas"><span class="me-2">2nd Task: Moons and Umbrellas</span><a href="#2nd-task-moons-and-umbrellas" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="description-1"><span class="me-2">Description</span><a href="#description-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Apart from the story, the task is the following: we receive a string, which contains the characters C, J and ?. We have to switch the ? characters to either C or J, such that in the resulting string, the weighted sum of the number of CJ and JC substrings is as small as possible. The number of CJs is weighted by X and the number of JCs by Y, these parameters are also given on the input.</p><h3 id="solution-1"><span class="me-2">Solution</span><a href="#solution-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Of the three test sets, the first (for 5 points) is very small, the string can be of length 10 at most, so here we could try out all possible cases, which amount to at most $2^10$ possibilities. If we were in a situation that we have already solved a few of the other tasks and just these 5 points are missing from the 30, then it would be worth coding just this much and not dealing with the other test sets.</p><p>The second test set (for 11 points) contains strings of length 1000 at most, which would be $2^1000$ possible solutions for each. Since $2^4 = 16 &gt; 10$, that is greater than $10^250$, which would be too much, even if we could calculate the weight in one step. This test set does not allow for a brute force solution, we have to do some thinking too, however for 11 points, it might be worth dealing with.</p><p>However, the third test set (for 1 point) is very unsympathetic. It is only worth 1 point, but negative values can also appear among the weights, which must be handled in a completely opposite way (the number of substrings must be maximized instead of minimized), the length of the strings is also $1000$, so we cannot give a brute force algorithm and finally it is a Hidden Verdict, so we won’t even know immediately whether our submission was successful. This is the test case that is not worth dealing with, unless we think of something quick for this while solving the second test set, otherwise we would just be wasting our time.</p><p>I submitted the following Python code for the first two test sets:</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="n">n</span> <span class="o">=</span> <span class="nf">int</span><span class="p">(</span><span class="nf">input</span><span class="p">())</span>
<span class="k">for</span> <span class="n">n_i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
  <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">m</span> <span class="o">=</span> <span class="nf">input</span><span class="p">().</span><span class="nf">split</span><span class="p">()</span>
  <span class="n">x</span> <span class="o">=</span> <span class="nf">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
  <span class="n">y</span> <span class="o">=</span> <span class="nf">int</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
  <span class="n">m</span> <span class="o">=</span> <span class="n">m</span><span class="p">.</span><span class="nf">replace</span><span class="p">(</span><span class="sh">'</span><span class="s">?</span><span class="sh">'</span><span class="p">,</span> <span class="sh">''</span><span class="p">)</span>
  <span class="n">xc</span> <span class="o">=</span> <span class="n">m</span><span class="p">.</span><span class="nf">count</span><span class="p">(</span><span class="sh">'</span><span class="s">CJ</span><span class="sh">'</span><span class="p">)</span>
  <span class="n">yc</span> <span class="o">=</span> <span class="n">m</span><span class="p">.</span><span class="nf">count</span><span class="p">(</span><span class="sh">'</span><span class="s">JC</span><span class="sh">'</span><span class="p">)</span>
  <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Case #</span><span class="si">{</span><span class="n">n_i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s">: </span><span class="si">{</span><span class="n">x</span><span class="o">*</span><span class="n">xc</span> <span class="o">+</span> <span class="n">y</span><span class="o">*</span><span class="n">yc</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
</pre></table></code></div></div><p>If we want to just minimize the number of CJs and JCs, without caring about the weights first, then we could simply go through the string from left to right and replace every ? with the character to the left of it (which can no longer be ?, because we must have overwritten it in the previous step), or in the special case the string starts with ?’s, then replace them with the first non-? character, then we get such a minimized solution.</p><p>We can observe, that no matter what we replace the ?’s with, there is no way to reduce CJ and JC counts, we could only add to it, since for example for every C?…?J, somewhere a CJ substring will occur. So this solution is the best for any non-negative X and Y weights.</p><p>Finally, it’s much easier to just delete the ?’s, since the method above only “slides” the non-? characters next to each other, so it will not introduce a new alternation, it will only move the existing ones next to each other.</p><p>For example for this input string:</p><p><code class="language-plaintext highlighter-rouge">???JC??C??JCJ</code></p><p>It will output this one:</p><p><code class="language-plaintext highlighter-rouge">JJJJCCCCCCJCJ</code></p><p>Which has the same number of CJ and JC substrings than the one which results from erasing the ?’s:</p><p><code class="language-plaintext highlighter-rouge">JCCJCJ</code></p><p>And this can be done in one operation in Python (<code class="language-plaintext highlighter-rouge">m.replace('?', '')</code>).</p><p>Python is a good choice here too, since it is concise and we have 10 seconds per test set, which is more than enough to run the code above.</p><p>We received 16 more points, we need 7 more.</p><h2 id="3rd-task-reversort-engineering"><span class="me-2">3rd Task: Reversort Engineering</span><a href="#3rd-task-reversort-engineering" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="description-2"><span class="me-2">Description</span><a href="#description-2" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>This is the task that starts the same way as Reversort, but now the roles are reversed: now on the input we get the length of the array and the cost and we have to output an array whose sorting will cost this much using Reversort (or write IMPOSSIBLE if this is not possible).</p><h3 id="solution-2"><span class="me-2">Solution</span><a href="#solution-2" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>For the first test set, the length of the array can be at most 7. This is very convenient, because we can try the 7!=5040 possible permutations one by one, run the solution given in the first task on each of them and print a permutation for which the cost is correct. If there is none, then print IMPOSSIBLE. This test set is worth 7 points, which is exactly what we need, so with this solution we are actually done, we could end the competition here.</p><p>The second test set is more difficult, the length of the array can be at most 100 and the brute force algorithm will run out of time on 100! cases. Since I’ve had a lot of time lest from the competition, I’ve decided to try to solve this test set too.</p><p>The key to the solution is to think backwards: we start from the final result, the sorted list of length N, we iterate on it backwards and step by step we “reverse” subarrays of the length we choose, until we reach the starting, mixed up list. If we can choose the lengths of the subarrays in such a way that the total sum of their length is the required cost, then the resulting array is the solution. (And here, of course, we have to notice on the task is impossible.)</p><p>The first observation is that we will use at least 1 cost in each step, since the task says that if the is the smallest element at the current position, we will still “flip” that one-element subarray. Since this will certainly arise as a cost at each position (n-1 times in total), it is worth deducting (accounting for) this at the beginning, so that during further calculations it will not happen that we have used up all the costs but have not yet reached the beginning of the array.</p><p>The consequence of this is that the cost of reversing an array of length $k$ will be $k-1$ from now on, because $1$ has already been accounted for.</p><p>And the next observation is that we can choose from the following costs in the given positions from back to front:</p><p>(Here the array is indexed with 0…n-1, Reversort does not run on the last element of the array, so we start backwards at index $n-2$.)</p><ul><li>index n-2: 0 if the element on index n-2 is rotated in place, and 1 if indexes n-2 and n-1 are swapped.<li>index n-3: 0,1,2, similarly.<li>index n-4: 0,1,2,3, similarly. …<li>index 0: 0,1,…,n-1.</ul><p>So the task is to assemble the required cost as an amount while we can choose 1 number in each step above. Since we can choose an arbitrarily small number in each step, it is a good strategy to choose the maximum possible in each iteration to reduce the remaining cost as much as possible, unless we exceed it. If the maximum value in the list of possible choices is already more than the remaining cost, then a value equal to the cost is available too and can be selected from the list, then we can choose 0 in the remaining iterations.</p><p>I implemented this algorithm in Python:</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
</pre><td class="rouge-code"><pre><span class="c1"># First line of input: number of test cases.
</span><span class="n">z</span> <span class="o">=</span> <span class="nf">int</span><span class="p">(</span><span class="nf">input</span><span class="p">())</span>
<span class="k">for</span> <span class="n">z_i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">z</span><span class="p">):</span>
  <span class="c1"># First line of test case: required array length, required cost value.
</span>  <span class="n">n</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="nf">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nf">input</span><span class="p">().</span><span class="nf">split</span><span class="p">(</span><span class="sh">'</span><span class="s"> </span><span class="sh">'</span><span class="p">))</span>
  
  <span class="c1"># First, we quickly rule out impossible cases:
</span>
  <span class="c1"># We know that the minimum possible cost is n-1, if the goal is
</span>  <span class="c1"># less than this, then it's impossible.
</span>  <span class="k">if</span> <span class="n">c</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Case #</span><span class="si">{</span><span class="n">z_i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s">: IMPOSSIBLE</span><span class="sh">"</span><span class="p">)</span>
    <span class="k">continue</span>
  <span class="c1"># To get the maximum possible cost, we choose largest number in each step,
</span>  <span class="c1"># which is the sum of the numbers N,...,2 (there is no 1, because for the
</span>  <span class="c1"># last element Reversort is not run).
</span>  <span class="k">if</span> <span class="n">n</span><span class="o">*</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="o">-</span><span class="mi">1</span> <span class="o">&lt;</span> <span class="n">c</span><span class="p">:</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Case #</span><span class="si">{</span><span class="n">z_i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s">: IMPOSSIBLE</span><span class="sh">"</span><span class="p">)</span>
    <span class="k">continue</span>
  <span class="c1"># The description of the test sets includes that 2&lt;n, this is unnecessary
</span>  <span class="c1"># here, I just didn't notice.
</span>  <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Case #</span><span class="si">{</span><span class="n">z_i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s">: 1</span><span class="sh">"</span><span class="p">)</span>
    <span class="k">continue</span>

  <span class="c1"># At this point a solution exists:
</span>
  <span class="c1"># We account for the n-1 cost at the beginning:
</span>  <span class="n">c</span> <span class="o">-=</span> <span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

  <span class="c1"># Here I first calculate the costs in advance (this is not necessary,
</span>  <span class="c1"># it could also be done on the go):
</span>  
  <span class="c1"># In this array I will store for each starting index the end
</span>  <span class="c1"># of the subarray to be rotated.
</span>  <span class="n">torev</span> <span class="o">=</span> <span class="nf">list</span><span class="p">(</span><span class="nf">range</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
  <span class="c1"># Here I'm going forwards, it is only necessary in the next step to go
</span>  <span class="c1"># backwards.
</span>  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
    <span class="c1"># Here I calculate how much costs I can account for in this iteration
</span>    <span class="c1"># (or the length of the longest possible subarray, or if it is too long,
</span>    <span class="c1"># then I can take the entire remaining cost).
</span>    <span class="n">j</span> <span class="o">=</span> <span class="nf">min</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="n">i</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
    <span class="c1"># I store where the end of the rotated subarray is. Here I had to
</span>    <span class="c1"># think a bit about the indexes, if there is a +1/-1 somewhere,
</span>    <span class="c1"># but this one is the correct indexing.
</span>    <span class="n">torev</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="n">j</span>
    <span class="c1"># I remove from the total cost the value I accounted for in this iteration.
</span>    <span class="n">c</span> <span class="o">-=</span> <span class="n">j</span>

  <span class="c1"># And here I play the previously stored rotations backwards and
</span>  <span class="c1"># generate the starting array:
</span>
  <span class="c1"># We start from the ordered array of length n.
</span>  <span class="n">l</span> <span class="o">=</span> <span class="nf">list</span><span class="p">(</span><span class="nf">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
  <span class="c1"># i=n-2...0
</span>  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
    <span class="c1"># End of the subarray to be rotated.
</span>    <span class="n">j</span> <span class="o">=</span> <span class="n">torev</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="c1"># Even more +1/-1 indexing questions.
</span>    <span class="n">l</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nf">reversed</span><span class="p">(</span><span class="n">l</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
    
  <span class="c1"># Print the solution.
</span>  <span class="n">st</span> <span class="o">=</span> <span class="sh">"</span><span class="s"> </span><span class="sh">"</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="nf">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">l</span><span class="p">))</span>
  <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Case #</span><span class="si">{</span><span class="n">z_i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s">: </span><span class="si">{</span><span class="n">st</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
</pre></table></code></div></div><p>There are many ways to calculate the solution here, it is probably not necessary to account for the $n-1$ cost in advance, we could notice on the go if we have run out of the allowed cost. This code could still be simplified by a lot. :)</p><p>With this solution, we scored 18 more points, which is 41 points in total. Every test set we submitted had a Visible Verdict, so we can be sure that we’ve made it to the next round!</p></div><div class="post-tail-wrapper text-muted pt-5"><div class="post-meta"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/competitions/">competitions</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-2 pb-2"><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/google/" class="post-tag no-text-decoration" >google</a> <a href="/tags/codejam/" class="post-tag no-text-decoration" >codejam</a></div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted me-1">Share</span> <span class="share-icons"> <a href="https://www.facebook.com/sharer/sharer.php?title=Google%20Code%20Jam%202021%20-%20Qualification%20Round%20-%20VProg&u=https%3A%2F%2Fvprog.hu%2Fposts%2F2021-04-16-google-code-jam-qualification-round%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook" > <i class="fa-fw fa-brands fa-square-facebook"></i> </a> <a href="https://twitter.com/intent/tweet?text=Google%20Code%20Jam%202021%20-%20Qualification%20Round%20-%20VProg&url=https%3A%2F%2Fvprog.hu%2Fposts%2F2021-04-16-google-code-jam-qualification-round%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter" > <i class="fa-fw fa-brands fa-square-twitter"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fvprog.hu%2Fposts%2F2021-04-16-google-code-jam-qualification-round%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin" > <i class="fa-fw fa-brands fa-linkedin"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 mb-5 text-muted"><div class="access"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/vprog/">vprog</a> <a class="post-tag btn btn-outline-primary" href="/tags/vprog-intro/">vprog-intro</a> <a class="post-tag btn btn-outline-primary" href="/tags/starting/">starting</a> <a class="post-tag btn btn-outline-primary" href="/tags/solutions/">solutions</a> <a class="post-tag btn btn-outline-primary" href="/tags/video/">video</a> <a class="post-tag btn btn-outline-primary" href="/tags/binsearch/">binsearch</a> <a class="post-tag btn btn-outline-primary" href="/tags/codeforces/">codeforces</a> <a class="post-tag btn btn-outline-primary" href="/tags/twoptr/">twoptr</a> <a class="post-tag btn btn-outline-primary" href="/tags/codejam/">codejam</a> <a class="post-tag btn btn-outline-primary" href="/tags/dfs/">dfs</a></div></section></div><section id="toc-wrapper" class="ps-0 pe-4"><h2 class="panel-heading ps-3 pt-2 mb-2">Contents</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"><div class="btn btn-outline-primary disabled" aria-label="Older"><p>-</p></div><a href="/posts/2022-04-12-wish-i-knew-how-to-sort/" class="btn btn-outline-primary" aria-label="Newer" ><p>Wish I Knew How to Sort (an exercise in probability)</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>Using the <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>.</p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/vprog/">vprog</a> <a class="post-tag btn btn-outline-primary" href="/tags/vprog-intro/">vprog-intro</a> <a class="post-tag btn btn-outline-primary" href="/tags/starting/">starting</a> <a class="post-tag btn btn-outline-primary" href="/tags/solutions/">solutions</a> <a class="post-tag btn btn-outline-primary" href="/tags/video/">video</a> <a class="post-tag btn btn-outline-primary" href="/tags/binsearch/">binsearch</a> <a class="post-tag btn btn-outline-primary" href="/tags/codeforces/">codeforces</a> <a class="post-tag btn btn-outline-primary" href="/tags/twoptr/">twoptr</a> <a class="post-tag btn btn-outline-primary" href="/tags/codejam/">codejam</a> <a class="post-tag btn btn-outline-primary" href="/tags/dfs/">dfs</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask"></div><script src="https://cdn.jsdelivr.net/combine/npm/jquery@3.7.1/dist/jquery.min.js,npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js,npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/magnific-popup@1.1.0/dist/jquery.magnific-popup.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.10/dayjs.min.js,npm/dayjs@1.11.10/locale/en.min.js,npm/dayjs@1.11.10/plugin/relativeTime.min.js,npm/dayjs@1.11.10/plugin/localizedFormat.min.js,npm/tocbot@4.21.1/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { /* start/end delimiter pairs for in-line math */ inlineMath: [ ['$', '$'], ['\\(', '\\)'] ], /* start/end delimiter pairs for display math */ displayMath: [ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-chtml.js"></script> <script defer src="/unregister.js"></script> <script> /* Note: dependent library will be loaded in `js-selector.html` */ SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{snippet}</p></article>', noResultsText: '<p class="mt-5"></p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
