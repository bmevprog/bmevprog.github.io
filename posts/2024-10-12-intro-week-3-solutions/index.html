<!doctype html><html lang="en" data-mode="light"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.4" /><meta property="og:title" content="VProg Intro : Week 3, Binary Search - Solutions" /><meta property="og:locale" content="en" /><meta name="description" content="HW1: Successful Pairs of Spells and Potions" /><meta property="og:description" content="HW1: Successful Pairs of Spells and Potions" /><link rel="canonical" href="https://vprog.hu/posts/2024-10-12-intro-week-3-solutions/" /><meta property="og:url" content="https://vprog.hu/posts/2024-10-12-intro-week-3-solutions/" /><meta property="og:site_name" content="VProg" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2024-10-12T16:00:00+02:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="VProg Intro : Week 3, Binary Search - Solutions" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-10-12T16:00:00+02:00","datePublished":"2024-10-12T16:00:00+02:00","description":"HW1: Successful Pairs of Spells and Potions","headline":"VProg Intro : Week 3, Binary Search - Solutions","mainEntityOfPage":{"@type":"WebPage","@id":"https://vprog.hu/posts/2024-10-12-intro-week-3-solutions/"},"url":"https://vprog.hu/posts/2024-10-12-intro-week-3-solutions/"}</script><title>VProg Intro : Week 3, Binary Search - Solutions | VProg</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="VProg"><meta name="application-name" content="VProg"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.21.1/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" style="display:block"> <img src="/assets/img/balloons-cartoon.png" width="100%" alt="avatar" onerror="this.style.display='none'"> </a><h1 class="site-title"> <a href="/">VProg</a></h1><p class="site-subtitle fst-italic mb-0">Competitive programming student club at BME. ICPC, Codeforces, LeetCode, etc.</p><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <a href="https://vprog.hu/discord" aria-label="discord" target="_blank" rel="noopener noreferrer" > <i class="fa-brands fa-discord" style="color: #7289da;"></i> </a> <a href="https://github.com/bmevprog" aria-label="github" target="_blank" rel="noopener noreferrer" > <i class="fa-brands fa-github" style="color: #333;"></i> </a> <a href="https://www.youtube.com/@bmevprog" aria-label="youtube" target="_blank" rel="noopener noreferrer" > <i class="fa-brands fa-youtube" style="color: #ff0000;"></i> </a> <a href="https://www.facebook.com/bmevprog" aria-label="facebook" target="_blank" rel="noopener noreferrer" > <i class="fa-brands fa-facebook-square" style="color: #3b5998;"></i> </a> <a href="https://www.instagram.com/bmevprog" aria-label="instagram" target="_blank" rel="noopener noreferrer" > <i class="fa-brands fa-instagram" style="color: #e1306c;"></i> </a> <a href="https://www.twitter.com/bmevprog" aria-label="twitter" target="_blank" rel="noopener noreferrer" > <i class="fa-brands fa-twitter" style="color: #1da1f2;"></i> </a> <a href="https://www.linkedin.com/company/bmevprog" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fa-brands fa-linkedin" style="color: #0077b5;"></i> </a></div></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/join/" class="nav-link"> <i class="fa-fw fa-solid fa-at"></i> <span>JOIN</span> </a><li class="nav-item"> <a href="/calendar/" class="nav-link"> <i class="fa-fw fa-solid fa-chalkboard-user"></i> <span>CALENDAR</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fa-solid fa-box-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fa-solid fa-bars-staggered"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fa-solid fa-tags"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/rss/" class="nav-link"> <i class="fa-fw fa-solid fa-rss"></i> <span>RSS</span> </a><li class="nav-item"> <a href="/contact/" class="nav-link"> <i class="fa-fw fa-solid fa-at"></i> <span>CONTACT</span> </a></ul></nav></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/"> Home </a> </span> <span>VProg Intro : Week 3, Binary Search - Solutions</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link"> <i class="fas fa-search fa-fw"></i> </button> <search class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1"><header><h1 data-toc-skip>VProg Intro : Week 3, Binary Search - Solutions</h1><div class="post-meta text-muted"> <span> Posted <time data-ts="1728741600" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Oct 12, 2024 </time> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://cs.bme.hu/~nemkin">Viktória Nemkin</a> </em> </span> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="2286 words" > <em>12 min</em> read</span></div></div></header><div class="content"><h2 id="hw1-successful-pairs-of-spells-and-potions"><span class="me-2">HW1: Successful Pairs of Spells and Potions</span><a href="#hw1-successful-pairs-of-spells-and-potions" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><a href="https://leetcode.com/problems/successful-pairs-of-spells-and-potions">LC 2300</a></p><p>For each spell, we are looking for the number of potions that will form a successful pair with it. We can first order the potions by increasing strength. Then, for each spell we can perform a binary search on the sorted potions array, looking for the smallest strength potion, that will still succeed, when paired with that spell. Then, any potion stronger than this will also succeed, while anything weaker will fail. So we can count the number of potions on the right side of the minimal successful one.</p><p>You can implement the binary search by hand in the following way:</p><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
</pre><td class="rouge-code"><pre><span class="k">using</span> <span class="n">ll</span> <span class="o">=</span> <span class="kt">long</span> <span class="kt">long</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
<span class="nl">public:</span>
  <span class="kt">bool</span> <span class="n">successful</span><span class="p">(</span><span class="n">ll</span> <span class="n">spell</span><span class="p">,</span> <span class="n">ll</span> <span class="n">potion</span><span class="p">,</span> <span class="n">ll</span> <span class="n">success</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">success</span> <span class="o">&lt;=</span> <span class="n">spell</span> <span class="o">*</span> <span class="n">potion</span><span class="p">;</span> <span class="p">}</span>

  <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">successfulPairs</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">spells</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">potions</span><span class="p">,</span> <span class="n">ll</span> <span class="n">success</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">sort</span><span class="p">(</span><span class="n">potions</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">potions</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">ans</span><span class="p">;</span>
    
    <span class="k">for</span><span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="n">spell</span> <span class="o">:</span> <span class="n">spells</span><span class="p">)</span>
    <span class="p">{</span>
      <span class="kt">int</span> <span class="n">lo</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="kt">int</span> <span class="n">hi</span> <span class="o">=</span> <span class="n">potions</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>

      <span class="k">while</span><span class="p">(</span><span class="n">lo</span> <span class="o">&lt;</span> <span class="n">hi</span><span class="p">)</span>
      <span class="p">{</span>
        <span class="kt">int</span> <span class="n">mid</span> <span class="o">=</span> <span class="p">(</span><span class="n">hi</span><span class="o">-</span><span class="n">lo</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span> <span class="o">+</span> <span class="n">lo</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">successful</span><span class="p">(</span><span class="n">spell</span><span class="p">,</span> <span class="n">potions</span><span class="p">[</span><span class="n">mid</span><span class="p">],</span> <span class="n">success</span><span class="p">))</span>
          <span class="n">hi</span> <span class="o">=</span> <span class="n">mid</span><span class="p">;</span>
        <span class="k">else</span>
          <span class="n">lo</span> <span class="o">=</span> <span class="n">mid</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="n">ans</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">potions</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="o">-</span><span class="n">lo</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">ans</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>
</pre></table></code></div></div><p>Or in this case, since the potions array is already ‘materialized’ in the memory, you can use <code class="language-plaintext highlighter-rouge">std::lower_bound</code> too.</p><p>In c++, when we have integers <code class="language-plaintext highlighter-rouge">int x,y;</code>, if we write <code class="language-plaintext highlighter-rouge">x/y</code>, that will be an integer division and return the floor, $\lfloor \frac{x}{y} \rfloor$. A neat trick to get the ceil, $\lceil \frac{x}{y} \rceil$ instead, is to write <code class="language-plaintext highlighter-rouge">(x+y-1)/y</code>. This works, since <code class="language-plaintext highlighter-rouge">(x+y)/y</code> would always increase the result by <code class="language-plaintext highlighter-rouge">+1</code>, so <code class="language-plaintext highlighter-rouge">(x+y-1)/y</code> increases by <code class="language-plaintext highlighter-rouge">+1</code> only when the remainder of <code class="language-plaintext highlighter-rouge">x mod y</code> is not <code class="language-plaintext highlighter-rouge">0</code>.</p><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre><span class="k">using</span> <span class="n">ll</span> <span class="o">=</span> <span class="kt">long</span> <span class="kt">long</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
<span class="nl">public:</span>

  <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">successfulPairs</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">spells</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">potions</span><span class="p">,</span> <span class="n">ll</span> <span class="n">success</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">sort</span><span class="p">(</span><span class="n">potions</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">potions</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">ans</span><span class="p">;</span>
    
    <span class="k">for</span><span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="n">spell</span> <span class="o">:</span> <span class="n">spells</span><span class="p">)</span>
    <span class="p">{</span>
      <span class="n">ll</span> <span class="n">minpotion</span> <span class="o">=</span> <span class="p">(</span><span class="n">success</span><span class="o">+</span><span class="n">spell</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="n">spell</span><span class="p">;</span>
      <span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="n">potions</span><span class="p">.</span><span class="n">end</span><span class="p">()</span> <span class="o">-</span> <span class="n">lower_bound</span><span class="p">(</span><span class="n">potions</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">potions</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="n">minpotion</span><span class="p">);</span>
      <span class="n">ans</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">count</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">ans</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>
</pre></table></code></div></div><h2 id="hw2--koko-eating-bananas"><span class="me-2">HW2 : Koko eating bananas</span><a href="#hw2--koko-eating-bananas" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><a href="https://leetcode.com/problems/koko-eating-bananas">LC 875</a></p><p>This is a typical ‘binary search for the smallest possible solution’ type of task. To see this, you have to answer two questions:</p><ul><li>Can you validate a solution? - If someone gave you a speed, could you check if Koko would finish in time with that speed?<li>Is the solution space ordered? - If a specific speed is correct, would any higher speed work also?</ul><p>The answer is yes to both questions, so let’s do a binary search!</p><p>We need a starting interval of possible answers. The lowest possible correct answer would be a speed of <code class="language-plaintext highlighter-rouge">1 banana / hour</code>, so we set this as lo. The highest possible speed we may need is for Koko to ‘devour’ each pile in <code class="language-plaintext highlighter-rouge">1 hour</code> (she cannot go faster than that), so that would mean she needs to be able to eat the largest pile in <code class="language-plaintext highlighter-rouge">1 hour</code>, so we set <code class="language-plaintext highlighter-rouge">hi</code> to this amonut of <code class="language-plaintext highlighter-rouge">bananas / hour</code>.</p><p>Then, we have a checker function <code class="language-plaintext highlighter-rouge">can_finish</code>, which tells us if a specific speed is enough for Koko to finish in time.</p><p>The rest is binary search, as seen before. :)</p><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre><td class="rouge-code"><pre><span class="k">using</span> <span class="n">ll</span> <span class="o">=</span> <span class="kt">long</span> <span class="kt">long</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Solution</span>
<span class="p">{</span>
<span class="nl">public:</span>
  <span class="kt">bool</span> <span class="n">can_finish</span><span class="p">(</span><span class="k">const</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">piles</span><span class="p">,</span> <span class="kt">int</span> <span class="n">hours</span><span class="p">,</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">speed</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="k">for</span><span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="n">pile</span> <span class="o">:</span> <span class="n">piles</span><span class="p">)</span> <span class="n">hours</span> <span class="o">-=</span> <span class="p">(</span><span class="n">pile</span> <span class="o">+</span> <span class="n">speed</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">speed</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">hours</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kt">int</span> <span class="nf">minEatingSpeed</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">piles</span><span class="p">,</span> <span class="kt">int</span> <span class="n">h</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="kt">int</span> <span class="n">lo</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">hi</span> <span class="o">=</span> <span class="o">*</span><span class="n">max_element</span><span class="p">(</span><span class="n">piles</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">piles</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>

    <span class="k">while</span><span class="p">(</span><span class="n">lo</span> <span class="o">&lt;</span> <span class="n">hi</span><span class="p">)</span>
    <span class="p">{</span>
      <span class="kt">int</span> <span class="n">mid</span> <span class="o">=</span> <span class="p">(</span><span class="n">hi</span><span class="o">-</span><span class="n">lo</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span> <span class="o">+</span> <span class="n">lo</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">can_finish</span><span class="p">(</span><span class="n">piles</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">mid</span><span class="p">))</span>
        <span class="n">hi</span> <span class="o">=</span> <span class="n">mid</span><span class="p">;</span>
      <span class="k">else</span>
        <span class="n">lo</span> <span class="o">=</span> <span class="n">mid</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span> 
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">lo</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>
</pre></table></code></div></div><h2 id="hw3--cardboard-for-pictures"><span class="me-2">HW3 : Cardboard for Pictures</span><a href="#hw3--cardboard-for-pictures" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><a href="https://codeforces.com/contest/1850/problem/E">CF 1850E</a></p><p>In many cases, exercises where a binary search is possible also allow for direct solutions. This exercise is one of those. The question is, would you rather implement a quadratic solver on floating point numbers or a binary search on integers?</p><p>The correct answer is the latter, so let’s look at binary search first.</p><h3 id="binary-search"><span class="me-2">Binary search</span><a href="#binary-search" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>To implement the checking function <code class="language-plaintext highlighter-rouge">bool fits(ll w)</code>, we must pay attention to overflows. Before executing any operation, we check if the operation would result in an overflow, <em>without actually executing it</em>!</p><p>For this, we store the maximum value of <code class="language-plaintext highlighter-rouge">long long</code>, in <code class="language-plaintext highlighter-rouge">maxll</code> and the maximum value we can square and still fit, in <code class="language-plaintext highlighter-rouge">maxllsql</code>.</p><p>To check if <code class="language-plaintext highlighter-rouge">side * side</code> would result in an overflow, we check <code class="language-plaintext highlighter-rouge">if (maxllsq &lt; side)</code>. To check if <code class="language-plaintext highlighter-rouge">total + add</code> would result in an overflow, we check <code class="language-plaintext highlighter-rouge">if (maxll - add &lt; total)</code>.</p><p>A possible upper bound on the valid <code class="language-plaintext highlighter-rouge">w</code>’s is $\sqrt{\frac{c}{n}}$, which would happen when all $n$ pictures were size $0$.</p><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
</pre><td class="rouge-code"><pre><span class="cp">#include</span> <span class="cpf">&lt;bits/stdc++.h&gt;</span><span class="cp">
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">using</span> <span class="n">ll</span> <span class="o">=</span> <span class="kt">long</span> <span class="kt">long</span><span class="p">;</span>
<span class="k">const</span> <span class="n">ll</span> <span class="n">maxll</span> <span class="o">=</span> <span class="n">numeric_limits</span><span class="o">&lt;</span><span class="n">ll</span><span class="o">&gt;::</span><span class="n">max</span><span class="p">();</span>
<span class="k">const</span> <span class="n">ll</span> <span class="n">maxllsq</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">maxll</span><span class="p">);</span>

<span class="n">ll</span> <span class="n">n</span><span class="p">,</span> <span class="n">c</span><span class="p">;</span>
<span class="n">vector</span><span class="o">&lt;</span><span class="n">ll</span><span class="o">&gt;</span> <span class="n">p</span><span class="p">;</span>
 
<span class="kt">bool</span> <span class="nf">fits</span><span class="p">(</span><span class="n">ll</span> <span class="n">w</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">ll</span> <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">for</span><span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="n">px</span> <span class="o">:</span> <span class="n">p</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">ll</span> <span class="n">side</span> <span class="o">=</span> <span class="n">px</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">w</span><span class="p">;</span>  <span class="k">if</span> <span class="p">(</span><span class="n">maxllsq</span> <span class="o">&lt;</span> <span class="n">side</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="n">ll</span> <span class="n">add</span> <span class="o">=</span> <span class="n">side</span> <span class="o">*</span> <span class="n">side</span><span class="p">;</span>  <span class="k">if</span> <span class="p">(</span><span class="n">maxll</span> <span class="o">-</span> <span class="n">add</span> <span class="o">&lt;</span> <span class="n">total</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="n">total</span> <span class="o">+=</span> <span class="n">add</span><span class="p">;</span>          <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="o">&lt;</span> <span class="n">total</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
<span class="p">}</span>
 
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="kt">int</span> <span class="n">t</span><span class="p">;</span> <span class="n">cin</span><span class="o">&gt;&gt;</span><span class="n">t</span><span class="p">;</span> <span class="k">while</span><span class="p">(</span><span class="n">t</span><span class="o">--</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">n</span> <span class="o">&gt;&gt;</span> <span class="n">c</span><span class="p">;</span>
    <span class="n">p</span><span class="p">.</span><span class="n">assign</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="p">{});</span> <span class="k">for</span><span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="n">px</span> <span class="o">:</span> <span class="n">p</span><span class="p">)</span> <span class="n">cin</span><span class="o">&gt;&gt;</span><span class="n">px</span><span class="p">;</span>

    <span class="n">ll</span> <span class="n">lo</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">ll</span> <span class="n">hi</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">c</span><span class="o">/</span><span class="n">n</span><span class="p">);</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">lo</span> <span class="o">&lt;</span> <span class="n">hi</span><span class="p">)</span>
    <span class="p">{</span>
      <span class="n">ll</span> <span class="n">mid</span> <span class="o">=</span> <span class="p">(</span><span class="n">hi</span> <span class="o">-</span> <span class="n">lo</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span> <span class="o">+</span> <span class="n">lo</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">fits</span><span class="p">(</span><span class="n">mid</span><span class="p">))</span>
        <span class="n">lo</span> <span class="o">=</span> <span class="n">mid</span><span class="p">;</span>
      <span class="k">else</span>
        <span class="n">hi</span> <span class="o">=</span> <span class="n">mid</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">lo</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Since are searching for the <strong>largest</strong> frame width for which we still have enough cardboard. This makes our binary search implementation slightly different here. In this case, we implement <code class="language-plaintext highlighter-rouge">upper_bound</code>, as opposed to <code class="language-plaintext highlighter-rouge">lower_bound</code>.</p><p><a href="/assets/posts/2024-10-12-intro-week-3-solutions/binary-search.png" class="popup img-link shimmer"><img src="/assets/posts/2024-10-12-intro-week-3-solutions/binary-search.png" alt="" loading="lazy"></a></p><p>It is useful to think about what will happen when our interval shrinks to size 2, this is where we can accurately set the +1/-1’s in our equations.</p><h3 id="direct-implementation---a-numerically-stable-quadratic-formula"><span class="me-2">Direct implementation - A numerically stable quadratic formula</span><a href="#direct-implementation---a-numerically-stable-quadratic-formula" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>For a specific $w$, the amount of cardboard we are using for a picture of size $p_i$ can be calculated as follows:</p><p><a href="/assets/posts/2024-10-12-intro-week-3-solutions/cardboard.png" class="popup img-link shimmer"><img src="/assets/posts/2024-10-12-intro-week-3-solutions/cardboard.png" alt="" loading="lazy"></a></p><p>The total amount of cardboard should be $c$, therefore our equation is</p>\[4n\cdot{}w^2 + (4\sum\limits_{i=1}^{n} p_i)\cdot{}w + p_i^2 = c\]<p>, which we need to solve for $w$.</p><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
</pre><td class="rouge-code"><pre><span class="cp">#include</span> <span class="cpf">&lt;bits/stdc++.h&gt;</span><span class="cp">
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="k">using</span> <span class="n">ll</span> <span class="o">=</span> <span class="kt">long</span> <span class="kt">long</span><span class="p">;</span>

<span class="c1">// solve ax^2 + bx + c = 0</span>
<span class="k">const</span> <span class="kt">double</span> <span class="n">eps</span> <span class="o">=</span> <span class="mf">1e-14</span><span class="p">;</span>
<span class="n">vector</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span> <span class="n">quadsolve</span><span class="p">(</span><span class="kt">double</span> <span class="n">a</span><span class="p">,</span> <span class="kt">double</span> <span class="n">b</span><span class="p">,</span> <span class="kt">double</span> <span class="n">c</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">if</span><span class="p">(</span><span class="n">abs</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">eps</span><span class="p">)</span> <span class="c1">// linear</span>
  <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">abs</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">eps</span><span class="p">)</span> <span class="k">return</span> <span class="p">{};</span> <span class="c1">// c = 0</span>
    <span class="k">return</span> <span class="p">{</span><span class="o">-</span><span class="n">c</span><span class="o">/</span><span class="n">b</span><span class="p">};</span> <span class="c1">// bx + c = 0</span>
  <span class="p">}</span>

  <span class="kt">double</span> <span class="n">D</span> <span class="o">=</span> <span class="n">b</span><span class="o">*</span><span class="n">b</span> <span class="o">-</span> <span class="mi">4</span><span class="o">*</span><span class="n">a</span><span class="o">*</span><span class="n">c</span><span class="p">;</span> <span class="c1">// discriminant</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">D</span> <span class="o">&lt;</span> <span class="o">-</span><span class="n">eps</span><span class="p">)</span> <span class="k">return</span> <span class="p">{};</span> <span class="c1">// no real roots</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">abs</span><span class="p">(</span><span class="n">D</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">eps</span><span class="p">)</span> <span class="k">return</span> <span class="p">{</span><span class="o">-</span><span class="mf">0.5</span><span class="o">*</span><span class="n">b</span><span class="o">/</span><span class="n">a</span><span class="p">};</span> <span class="c1">// double root</span>

  <span class="c1">// numerically stable: no catastrophic cancellation</span>
  <span class="kt">double</span> <span class="n">sgnb</span> <span class="o">=</span> <span class="p">(</span><span class="n">b</span> <span class="o">&gt;=</span> <span class="mf">0.0</span><span class="p">)</span> <span class="o">?</span> <span class="mf">1.0</span> <span class="o">:</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">;</span>
  <span class="kt">double</span> <span class="n">q</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">b</span> <span class="o">+</span> <span class="n">sgnb</span> <span class="o">*</span> <span class="nf">sqrt</span><span class="p">(</span><span class="n">D</span><span class="p">));</span>
  <span class="k">return</span> <span class="p">{</span><span class="n">q</span><span class="o">/</span><span class="n">a</span><span class="p">,</span> <span class="n">c</span><span class="o">/</span><span class="n">q</span><span class="p">};</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="kt">int</span> <span class="n">t</span><span class="p">;</span> <span class="n">cin</span><span class="o">&gt;&gt;</span><span class="n">t</span><span class="p">;</span> <span class="k">while</span><span class="p">(</span><span class="n">t</span><span class="o">--</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">ll</span> <span class="n">n</span><span class="p">,</span> <span class="n">c</span><span class="p">;</span> <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">n</span> <span class="o">&gt;&gt;</span> <span class="n">c</span><span class="p">;</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">ll</span><span class="o">&gt;</span> <span class="n">p</span><span class="p">(</span><span class="n">n</span><span class="p">);</span> <span class="k">for</span><span class="p">(</span><span class="n">ll</span> <span class="o">&amp;</span><span class="n">px</span> <span class="o">:</span> <span class="n">p</span><span class="p">)</span> <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">px</span><span class="p">;</span>
  
    <span class="n">ll</span> <span class="n">A</span><span class="o">=</span><span class="mi">4</span><span class="o">*</span><span class="n">n</span><span class="p">,</span> <span class="n">B</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">C</span><span class="o">=-</span><span class="n">c</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="n">px</span> <span class="o">:</span> <span class="n">p</span><span class="p">)</span> <span class="p">{</span> <span class="n">B</span> <span class="o">+=</span> <span class="mi">4</span><span class="o">*</span><span class="n">px</span><span class="p">;</span> <span class="n">C</span> <span class="o">+=</span> <span class="n">px</span><span class="o">*</span><span class="n">px</span><span class="p">;</span> <span class="p">}</span>

    <span class="k">auto</span> <span class="n">result</span> <span class="o">=</span> <span class="n">quadsolve</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">,</span><span class="n">C</span><span class="p">);</span>
    <span class="k">auto</span> <span class="n">ans</span> <span class="o">=</span> <span class="o">*</span><span class="n">max_element</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">result</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="n">ll</span><span class="p">)</span><span class="n">round</span><span class="p">(</span><span class="n">ans</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></table></code></div></div><p>The <code class="language-plaintext highlighter-rouge">vector&lt;double&gt; quadsolve(double a, double b, double c)</code> function above finds the roots of the quadratic formula $ax^2 + bx + c = 0$. Mathematically, the roots are given by</p>\[x_{1,2} = \frac{-b \pm \sqrt{D}}{2a}\]<p>, where $D = b^2 - 4ac$ is the discriminant.</p><p>There are two important implementation details in this code:</p><p>Firstly, we must always allow for some numerical precision error. So we set $\varepsilon = 10^{-14}$ and consider a variable $x$ to be $0$ whenever $x \in [-\varepsilon, \varepsilon]$, and to be negative or positive only outside of this interval.</p><p>Secondly, there is one numerical stability issue in the quadratic equation: if the value of $\sqrt{D}$ is close to $|b|$, then one of the two possible values of $b \pm \sqrt{D}$ can be too small, which results in <a href="https://en.wikipedia.org/wiki/Catastrophic_cancellation"><em>catastrophic cancellation</em></a> of the terms - a loss of significance during our calculations.</p><p>The implementation above avoids this issue by calculating the value which does not suffer from this issue and using <a href="https://en.wikipedia.org/wiki/Vieta%27s_formulas#Example">Vieta’s formula</a> $x_1 \cdot x_2 = \frac{c}{a}$ to find the value of the other.</p><p>For more details, see the PTVF Numerical recipes book, equations 5.6.4, 5.6.5 in the 2nd edition.</p><h2 id="challenge-doremys-iq"><span class="me-2">Challenge: Doremy’s IQ</span><a href="#challenge-doremys-iq" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><a href="https://codeforces.com/contest/1707/problem/A">CF 1707A</a></p><p>For this exercise, we first have to make one important observation:</p><p>If we want to take a contest that would lower our IQ, it is always better to choose a later one, so we have a higher IQ for the contests in the days in-between the two options.</p><p>More formally, given any solution to this problem, we can create another solution with the <em>same amount</em> of contests taken by copying all contests that did not lower our IQ, then picking the latest possible contests from the remaining ones to match the total number of contests needed.</p><p>Since any IQ-lowering contest would move to a later date, our daily current IQ could only increase, which means we can test the same contests in-between without losing IQ.</p><p>We can recall, that this is a ‘greedy-stays-ahead’ type of proof, similar to the <a href="/posts/2024-09-20-intro-week-1-solutions/#hw2-chat-room">Chat room</a> problem from Week 1.</p><p>This means that a good strategy for us is to first start taking contests that don’t lower our IQ, then at a certain day switch to taking all remaining contests.</p><p>The question is: At which day should we change our strategy?</p><p>We want to pick the earliest day, that is still viable, so that we don’t end up with negative IQ at the end. We can simply simulate this process in $O(n)$ and check our remaining IQ at the end.</p><p>If a strategy-changing day is viable, then every later day is also viable. To maximize the contests we took, we want to find the earliest viable day. This allows us to binary search for its location!</p><p>We will execute $O(log(n))$ steps during our binary search, each step being an $O(n)$ simulation, for a total of $O(nlog(n))$, which fits into out time limits!</p><p>A possible implementation:</p><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
</pre><td class="rouge-code"><pre><span class="cp">#include</span> <span class="cpf">&lt;bits/stdc++.h&gt;</span><span class="cp">
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="n">q</span><span class="p">;</span>
<span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">a</span><span class="p">;</span>

<span class="kt">bool</span> <span class="nf">doremy_result</span><span class="p">(</span><span class="kt">int</span> <span class="n">from</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">ans</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">ans</span><span class="p">.</span><span class="n">assign</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="p">{});</span>

  <span class="kt">int</span> <span class="n">q_left</span> <span class="o">=</span> <span class="n">q</span><span class="p">;</span>
  <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">from</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">ans</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">q_left</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="n">from</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">n</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">ans</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="o">!!</span><span class="n">q_left</span><span class="p">;</span>
    <span class="n">q_left</span> <span class="o">-=</span> <span class="p">(</span><span class="n">q_left</span> <span class="o">&lt;</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">q_left</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">ios</span><span class="o">::</span><span class="n">sync_with_stdio</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span> <span class="n">cin</span><span class="p">.</span><span class="n">tie</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
  <span class="kt">int</span> <span class="n">t</span><span class="p">;</span> <span class="n">cin</span><span class="o">&gt;&gt;</span><span class="n">t</span><span class="p">;</span> <span class="k">while</span><span class="p">(</span><span class="n">t</span><span class="o">--</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">cin</span><span class="o">&gt;&gt;</span><span class="n">n</span><span class="o">&gt;&gt;</span><span class="n">q</span><span class="p">;</span>
    <span class="n">a</span><span class="p">.</span><span class="n">assign</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="p">{});</span> <span class="k">for</span><span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="n">ax</span><span class="o">:</span> <span class="n">a</span><span class="p">)</span> <span class="n">cin</span><span class="o">&gt;&gt;</span><span class="n">ax</span><span class="p">;</span>

    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">ans</span><span class="p">;</span>

    <span class="kt">int</span> <span class="n">lo</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">hi</span><span class="o">=</span><span class="n">n</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">lo</span><span class="o">&lt;</span><span class="n">hi</span><span class="p">)</span>
    <span class="p">{</span>
      <span class="kt">int</span> <span class="n">mid</span> <span class="o">=</span> <span class="p">(</span><span class="n">hi</span><span class="o">-</span><span class="n">lo</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span> <span class="o">+</span> <span class="n">lo</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">doremy_result</span><span class="p">(</span><span class="n">mid</span><span class="p">,</span> <span class="n">ans</span><span class="p">))</span>
        <span class="n">hi</span> <span class="o">=</span> <span class="n">mid</span><span class="p">;</span>
      <span class="k">else</span>
        <span class="n">lo</span> <span class="o">=</span> <span class="n">mid</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">doremy_result</span><span class="p">(</span><span class="n">lo</span><span class="p">,</span> <span class="n">ans</span><span class="p">);</span>

    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">n</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">ans</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="going-backwards"><span class="me-2">Going backwards</span><a href="#going-backwards" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Sometimes, thinking about a problem in <em>reverse</em> can make it easier to solve. Imagine starting on the last day with an IQ of 0 and moving <em>backwards in time</em>. We can simulate the process in reverse like this:</p><ul><li>While our current IQ is less than our original starting IQ, we attempt all contests.<li>Each time we try a contest that is harder than our current IQ level, our IQ increases.<li>We can keep increasing our IQ until we reach our starting IQ.<li>Once we’ve reached our starting IQ, we can only attempt contests that are not more difficult than our IQ.</ul><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre><td class="rouge-code"><pre><span class="cp">#include</span> <span class="cpf">&lt;bits/stdc++.h&gt;</span><span class="cp">
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
  
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">t</span><span class="p">;</span> <span class="n">cin</span><span class="o">&gt;&gt;</span><span class="n">t</span><span class="p">;</span> <span class="k">while</span><span class="p">(</span><span class="n">t</span><span class="o">--</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="n">q</span><span class="p">;</span> <span class="n">cin</span><span class="o">&gt;&gt;</span><span class="n">n</span><span class="o">&gt;&gt;</span><span class="n">q</span><span class="p">;</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">a</span><span class="p">(</span><span class="n">n</span><span class="p">);</span> <span class="k">for</span><span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="n">ax</span><span class="o">:</span> <span class="n">a</span><span class="p">)</span> <span class="n">cin</span><span class="o">&gt;&gt;</span><span class="n">ax</span><span class="p">;</span>
  
    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">ans</span><span class="p">(</span><span class="n">n</span><span class="p">);</span>
    <span class="kt">int</span> <span class="n">q_curr</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="mi">0</span><span class="o">&lt;=</span><span class="n">i</span><span class="p">;</span> <span class="o">--</span><span class="n">i</span><span class="p">)</span>
    <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">q_curr</span><span class="p">)</span> <span class="n">ans</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
      <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">q_curr</span> <span class="o">&lt;</span> <span class="n">q</span><span class="p">)</span>
      <span class="p">{</span>
        <span class="n">ans</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="o">++</span><span class="n">q_curr</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">for</span><span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="n">ansx</span><span class="o">:</span> <span class="n">ans</span><span class="p">)</span> <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="n">ansx</span><span class="p">;</span>
    <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="n">endl</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></table></code></div></div><p>You may have noticed that there is a tiny discrepancy here: If the difficulty of a contest is $x$ and our current IQ is $x-1$, we would be increasing it, which means our IQ was $x$ before testing, in which case we should not have lost IQ testing that contest. Luckily, this only happens when the optimal solution allows for some IQ left over at the end. For example, when <code class="language-plaintext highlighter-rouge">n=3, q=3, a=[4,3,3,3]</code>, the optimal solution is <code class="language-plaintext highlighter-rouge">ans=[0,1,1,1]</code>, which leaves us with $1$ IQ at the end.</p></div><div class="post-tail-wrapper text-muted pt-5"><div class="post-meta"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/vprog-intro/">vprog-intro</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-2 pb-2"><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/vprog-intro/" class="post-tag no-text-decoration" >vprog-intro</a> <a href="/tags/binsearch/" class="post-tag no-text-decoration" >binsearch</a> <a href="/tags/solutions/" class="post-tag no-text-decoration" >solutions</a></div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted me-1">Share</span> <span class="share-icons"> <a href="https://www.facebook.com/sharer/sharer.php?title=VProg%20Intro%20:%20Week%203,%20Binary%20Search%20-%20Solutions%20-%20VProg&u=https%3A%2F%2Fvprog.hu%2Fposts%2F2024-10-12-intro-week-3-solutions%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook" > <i class="fa-fw fa-brands fa-square-facebook"></i> </a> <a href="https://twitter.com/intent/tweet?text=VProg%20Intro%20:%20Week%203,%20Binary%20Search%20-%20Solutions%20-%20VProg&url=https%3A%2F%2Fvprog.hu%2Fposts%2F2024-10-12-intro-week-3-solutions%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter" > <i class="fa-fw fa-brands fa-square-twitter"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fvprog.hu%2Fposts%2F2024-10-12-intro-week-3-solutions%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin" > <i class="fa-fw fa-brands fa-linkedin"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 mb-5 text-muted"><div class="access"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/vprog/">vprog</a> <a class="post-tag btn btn-outline-primary" href="/tags/vprog-intro/">vprog-intro</a> <a class="post-tag btn btn-outline-primary" href="/tags/starting/">starting</a> <a class="post-tag btn btn-outline-primary" href="/tags/solutions/">solutions</a> <a class="post-tag btn btn-outline-primary" href="/tags/video/">video</a> <a class="post-tag btn btn-outline-primary" href="/tags/binsearch/">binsearch</a> <a class="post-tag btn btn-outline-primary" href="/tags/codeforces/">codeforces</a> <a class="post-tag btn btn-outline-primary" href="/tags/twoptr/">twoptr</a> <a class="post-tag btn btn-outline-primary" href="/tags/codejam/">codejam</a> <a class="post-tag btn btn-outline-primary" href="/tags/dfs/">dfs</a></div></section></div><section id="toc-wrapper" class="ps-0 pe-4"><h2 class="panel-heading ps-3 pt-2 mb-2">Contents</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/2024-09-20-intro-week-1-solutions/" class="post-preview card h-100"><div class="card-body"> <time class="small" data-ts="1726822800" data-df="ll" > Sep 20, 2024 </time><h4 class="pt-0 my-2">VProg Intro : Week 1, Introduction - Solutions</h4><div class="text-muted small"><p> HW1: Present from Lena CF 118B There are many ways you can come up with code for this. In this example, we calculate the following way: Iterate each cell position in the $(2n+1) \times (2n+1)...</p></div></div></a></article><article class="col"> <a href="/posts/2024-09-28-intro-week-3/" class="post-preview card h-100"><div class="card-body"> <time class="small" data-ts="1727497800" data-df="ll" > Sep 28, 2024 </time><h4 class="pt-0 my-2">VProg Intro : Week 3, Binary Search</h4><div class="text-muted small"><p></p></div></div></a></article><article class="col"> <a href="/posts/2024-10-11-intro-week-2-solutions/" class="post-preview card h-100"><div class="card-body"> <time class="small" data-ts="1728676800" data-df="ll" > Oct 11, 2024 </time><h4 class="pt-0 my-2">VProg Intro : Week 2, Two Pointers - Solutions</h4><div class="text-muted small"><p> HW1: 3SUM LC 15 This exercise is similar to the TwoSum one in the video. We iterate the input vector, checking all possible candidates for the first number of the three. Inside the loop we do th...</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/posts/2024-10-11-intro-week-2-solutions/" class="btn btn-outline-primary" aria-label="Older" ><p>VProg Intro : Week 2, Two Pointers - Solutions</p></a><div class="btn btn-outline-primary disabled" aria-label="Newer"><p>-</p></div></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>Using the <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>.</p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/vprog/">vprog</a> <a class="post-tag btn btn-outline-primary" href="/tags/vprog-intro/">vprog-intro</a> <a class="post-tag btn btn-outline-primary" href="/tags/starting/">starting</a> <a class="post-tag btn btn-outline-primary" href="/tags/solutions/">solutions</a> <a class="post-tag btn btn-outline-primary" href="/tags/video/">video</a> <a class="post-tag btn btn-outline-primary" href="/tags/binsearch/">binsearch</a> <a class="post-tag btn btn-outline-primary" href="/tags/codeforces/">codeforces</a> <a class="post-tag btn btn-outline-primary" href="/tags/twoptr/">twoptr</a> <a class="post-tag btn btn-outline-primary" href="/tags/codejam/">codejam</a> <a class="post-tag btn btn-outline-primary" href="/tags/dfs/">dfs</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask"></div><script src="https://cdn.jsdelivr.net/combine/npm/jquery@3.7.1/dist/jquery.min.js,npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js,npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/magnific-popup@1.1.0/dist/jquery.magnific-popup.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.10/dayjs.min.js,npm/dayjs@1.11.10/locale/en.min.js,npm/dayjs@1.11.10/plugin/relativeTime.min.js,npm/dayjs@1.11.10/plugin/localizedFormat.min.js,npm/tocbot@4.21.1/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { /* start/end delimiter pairs for in-line math */ inlineMath: [ ['$', '$'], ['\\(', '\\)'] ], /* start/end delimiter pairs for display math */ displayMath: [ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-chtml.js"></script> <script defer src="/unregister.js"></script> <script> /* Note: dependent library will be loaded in `js-selector.html` */ SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{snippet}</p></article>', noResultsText: '<p class="mt-5"></p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
